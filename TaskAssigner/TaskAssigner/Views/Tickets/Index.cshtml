@{
    ViewBag.Title = "Tickets";
}

<h2>@ViewBag.Title</h2>

<form data-bind="submit: addTicket">
    <div id="new-ticket">
        <textarea rows="5" cols="25" data-bind="value: ticketToAdd">
        </textarea>
        <br/>
        Tags: <input id="tags" type="text"/>
    </div>
    <button type="submit">Add</button>
</form>

<div data-bind="foreach: tickets">
    <div data-bind="text: description"></div>
    Tags: <span data-bind="text: tagsString"></span>

</div>


<script type="text/javascript">
    var viewModel;
    var tags;
    $(function () {
        $.ajax({
            type: "GET",
            url: "Tickets/GetTickets",
            success: function (result) {

                var tickets = [];
                for (var i = 0; i < result.Tickets.length; i++) {
                    tickets.push(new Ticket(result.Tickets[i].Description, result.Tickets[i].Tags));
                }
                viewModel = new TicketsViewModel(tickets);
                ko.applyBindings(viewModel);

                var autoComplete = new AutoComplete(result.Tags);
            }
        });

    });

</script>
